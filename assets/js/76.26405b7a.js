(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{652:function(e,t,a){"use strict";a.r(t);var r=a(10),v=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#流程"}},[e._v("#")]),e._v(" 流程")]),e._v(" "),a("ul",[a("li",[e._v("从配置文件和"),a("code",[e._v("shell")]),e._v("等读取参数合并，用参数实例化"),a("code",[e._v("compiler")]),e._v("对象，注入内置插件配置插件环境等操作。执行"),a("code",[e._v("compiler.run")]),e._v("方法开始编译。找出"),a("code",[e._v("entry")]),e._v("所有入口文件，调用"),a("code",[e._v("compilation.addEnty")]),e._v("创建入口文件的依赖对象（dependence）。")]),e._v(" "),a("li",[e._v("根据入口文件创建模块对象，调用"),a("code",[e._v("loader-runner")]),e._v("仓库的"),a("code",[e._v("runloader")]),e._v("将资源转译为标准JavaScript内容，调用acorn将内容转为AST，遍历抽象语法树，监听导入语句（"),a("code",[e._v("require、require.ensure、import")]),e._v("），将依赖对象加入到模块依赖列表。调用"),a("code",[e._v("handleParseResult")]),e._v("不断递归处理新增的依赖。与此同时还会构建依赖关系图（dependence graph）、模块对象有分为同步和异步模块。\n"),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://cdn.jsdelivr.net/gh/FrancisSaber/image/markdown-Image202203242325494.png",alt:"图片"}})]),e._v(" "),a("li",[e._v("seal：在处理完所有的模块后，Webpack会为每个"),a("code",[e._v("entry")]),e._v("创建一个代码块，对于异步模块额外创建一个代码块，遍历模块列表，根据模块导入规则将module加入到不同的chunk。同时会构建"),a("code",[e._v("ChunkGraph")]),e._v("。")]),e._v(" "),a("li",[a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://cdn.jsdelivr.net/gh/FrancisSaber/image/markdown-Image202203250003153.png",alt:"图片"}})]),e._v(" "),a("li",[e._v("由于Webpack是根据entry和动态导入两种情况阻止代码块的，会导致重复打包，可以通过扩展插件解决（"),a("code",[e._v("splitChunksPlugins")]),e._v("）。在遍历modules列表将模块加入到chunk会触发优化钩子（也就是optimizeChunks）")]),e._v(" "),a("li",[e._v("经过构建后，"),a("code",[e._v("compilation")]),e._v("会得到资源内容和依赖关系，经过seal（生成）后，会得到资源输出图谱（chunkGraph）。Webpack会调用"),a("code",[e._v("compiler.emitAssets")]),e._v("将资源被写入文件系统。")])]),e._v(" "),a("h1",{attrs:{id:"名词解释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#名词解释"}},[e._v("#")]),e._v(" 名词解释")]),e._v(" "),a("ul",[a("li",[e._v("Entry：编译的入口，Webpack编译起点")]),e._v(" "),a("li",[e._v("Compiler：编译管理器，webpack启动会自动创建，直到编译结束退出")]),e._v(" "),a("li",[a("code",[e._v("Compilation")]),e._v(":单次编译过程的管理器，当开启了文件监听（watch = true）时，运行过程只有一个"),a("code",[e._v("compiler")]),e._v("，每当文件发生变更都重新创建一个"),a("code",[e._v("compilation")]),e._v("对象+")]),e._v(" "),a("li")])])}),[],!1,null,null,null);t.default=v.exports}}]);