<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WebPack简介 | ccy&#39;s blogs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/ccyblog/favicon.ico">
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/UsernameFull/l2d@0.2/js/frame/live2dcubismcore.min.js"></script>
    <script src="https://pixijs.download/v4.8.4/pixi.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/litstronger/live2d-moc3@master/js/live2dcubismframework.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/litstronger/live2d-moc3@master/js/live2dcubismpixi.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/litstronger/live2d-moc3@master/js/l2d.js"></script>
    <meta name="description" content="个人技术博客">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/ccyblog/assets/css/0.styles.79d32354.css" as="style"><link rel="preload" href="/ccyblog/assets/js/app.61cc9ff9.js" as="script"><link rel="preload" href="/ccyblog/assets/js/3.897744a6.js" as="script"><link rel="preload" href="/ccyblog/assets/js/1.371d3697.js" as="script"><link rel="preload" href="/ccyblog/assets/js/51.f502157e.js" as="script"><link rel="preload" href="/ccyblog/assets/js/8.b19724a0.js" as="script"><link rel="prefetch" href="/ccyblog/assets/js/10.a51d9fc9.js"><link rel="prefetch" href="/ccyblog/assets/js/11.8d124275.js"><link rel="prefetch" href="/ccyblog/assets/js/12.a334a46b.js"><link rel="prefetch" href="/ccyblog/assets/js/13.8010945d.js"><link rel="prefetch" href="/ccyblog/assets/js/14.8e3c3ac4.js"><link rel="prefetch" href="/ccyblog/assets/js/15.81bd0ba2.js"><link rel="prefetch" href="/ccyblog/assets/js/16.232611db.js"><link rel="prefetch" href="/ccyblog/assets/js/17.667dde35.js"><link rel="prefetch" href="/ccyblog/assets/js/18.71e79375.js"><link rel="prefetch" href="/ccyblog/assets/js/19.f10b5e62.js"><link rel="prefetch" href="/ccyblog/assets/js/20.dd05ecdc.js"><link rel="prefetch" href="/ccyblog/assets/js/21.4a07e2cf.js"><link rel="prefetch" href="/ccyblog/assets/js/22.29c735e7.js"><link rel="prefetch" href="/ccyblog/assets/js/23.04beb3f2.js"><link rel="prefetch" href="/ccyblog/assets/js/24.e4efbb4f.js"><link rel="prefetch" href="/ccyblog/assets/js/25.63de8752.js"><link rel="prefetch" href="/ccyblog/assets/js/26.1a8c82ca.js"><link rel="prefetch" href="/ccyblog/assets/js/27.47678a4d.js"><link rel="prefetch" href="/ccyblog/assets/js/28.4d87f639.js"><link rel="prefetch" href="/ccyblog/assets/js/29.d613dcd8.js"><link rel="prefetch" href="/ccyblog/assets/js/30.610dbdf4.js"><link rel="prefetch" href="/ccyblog/assets/js/31.c4817f6d.js"><link rel="prefetch" href="/ccyblog/assets/js/32.7af520a4.js"><link rel="prefetch" href="/ccyblog/assets/js/33.5ce06274.js"><link rel="prefetch" href="/ccyblog/assets/js/34.b2117dfb.js"><link rel="prefetch" href="/ccyblog/assets/js/35.377603e6.js"><link rel="prefetch" href="/ccyblog/assets/js/36.883e88a6.js"><link rel="prefetch" href="/ccyblog/assets/js/37.872a7cdf.js"><link rel="prefetch" href="/ccyblog/assets/js/38.18f351f9.js"><link rel="prefetch" href="/ccyblog/assets/js/39.0487dd57.js"><link rel="prefetch" href="/ccyblog/assets/js/4.9b4181ee.js"><link rel="prefetch" href="/ccyblog/assets/js/40.abacd655.js"><link rel="prefetch" href="/ccyblog/assets/js/41.abf116df.js"><link rel="prefetch" href="/ccyblog/assets/js/42.7f9de919.js"><link rel="prefetch" href="/ccyblog/assets/js/43.d41da37b.js"><link rel="prefetch" href="/ccyblog/assets/js/44.7c2519a6.js"><link rel="prefetch" href="/ccyblog/assets/js/45.29a6bc83.js"><link rel="prefetch" href="/ccyblog/assets/js/46.5f6478d4.js"><link rel="prefetch" href="/ccyblog/assets/js/47.631bdc1f.js"><link rel="prefetch" href="/ccyblog/assets/js/48.6df6dfd4.js"><link rel="prefetch" href="/ccyblog/assets/js/49.8fdfb49c.js"><link rel="prefetch" href="/ccyblog/assets/js/5.bd4235cd.js"><link rel="prefetch" href="/ccyblog/assets/js/50.88f2f8bf.js"><link rel="prefetch" href="/ccyblog/assets/js/52.9bf27ff9.js"><link rel="prefetch" href="/ccyblog/assets/js/53.56ba7eeb.js"><link rel="prefetch" href="/ccyblog/assets/js/54.212c55f1.js"><link rel="prefetch" href="/ccyblog/assets/js/55.6fc8672f.js"><link rel="prefetch" href="/ccyblog/assets/js/56.8cbf943d.js"><link rel="prefetch" href="/ccyblog/assets/js/57.8b84c069.js"><link rel="prefetch" href="/ccyblog/assets/js/58.df9fd31e.js"><link rel="prefetch" href="/ccyblog/assets/js/59.4a889f7f.js"><link rel="prefetch" href="/ccyblog/assets/js/6.1ebcf0d6.js"><link rel="prefetch" href="/ccyblog/assets/js/60.045b3756.js"><link rel="prefetch" href="/ccyblog/assets/js/61.4e8f609c.js"><link rel="prefetch" href="/ccyblog/assets/js/62.4fe15d75.js"><link rel="prefetch" href="/ccyblog/assets/js/63.e9ac2545.js"><link rel="prefetch" href="/ccyblog/assets/js/64.083e8d2c.js"><link rel="prefetch" href="/ccyblog/assets/js/65.b6e595bc.js"><link rel="prefetch" href="/ccyblog/assets/js/66.26689277.js"><link rel="prefetch" href="/ccyblog/assets/js/67.60ccd17c.js"><link rel="prefetch" href="/ccyblog/assets/js/68.42b6df4a.js"><link rel="prefetch" href="/ccyblog/assets/js/69.1d5ac1c5.js"><link rel="prefetch" href="/ccyblog/assets/js/7.58212ba9.js"><link rel="prefetch" href="/ccyblog/assets/js/70.6b794575.js"><link rel="prefetch" href="/ccyblog/assets/js/71.09fac264.js"><link rel="prefetch" href="/ccyblog/assets/js/72.ee6a2190.js"><link rel="prefetch" href="/ccyblog/assets/js/73.da9be3f4.js"><link rel="prefetch" href="/ccyblog/assets/js/74.d901de2d.js"><link rel="prefetch" href="/ccyblog/assets/js/75.a8f3a837.js"><link rel="prefetch" href="/ccyblog/assets/js/76.26405b7a.js"><link rel="prefetch" href="/ccyblog/assets/js/77.abe05554.js"><link rel="prefetch" href="/ccyblog/assets/js/78.6fd39cf3.js"><link rel="prefetch" href="/ccyblog/assets/js/79.5a5a23fb.js"><link rel="prefetch" href="/ccyblog/assets/js/80.5de6685c.js"><link rel="prefetch" href="/ccyblog/assets/js/81.452915be.js"><link rel="prefetch" href="/ccyblog/assets/js/82.04c6cc59.js"><link rel="prefetch" href="/ccyblog/assets/js/83.8288a3e4.js"><link rel="prefetch" href="/ccyblog/assets/js/84.e49e3728.js"><link rel="prefetch" href="/ccyblog/assets/js/85.8ad8ef5d.js"><link rel="prefetch" href="/ccyblog/assets/js/86.1d4c8e78.js"><link rel="prefetch" href="/ccyblog/assets/js/87.fc6b54da.js"><link rel="prefetch" href="/ccyblog/assets/js/88.1e7cf8b0.js"><link rel="prefetch" href="/ccyblog/assets/js/9.a8e5976d.js">
    <link rel="stylesheet" href="/ccyblog/assets/css/0.styles.79d32354.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>ccy's blogs</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>个人技术博客</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>月夕花辰</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ccyblog/" class="home-link router-link-active"><img src="/ccyblog/avatar.png" alt="ccy's blogs" class="logo"> <span class="site-name">ccy's blogs</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ccyblog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ccyblog/categories/配置/" class="nav-link"><i class="undefined"></i>
  配置
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/vue/" class="nav-link"><i class="undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/手写题/" class="nav-link"><i class="undefined"></i>
  手写题
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/直播/" class="nav-link"><i class="undefined"></i>
  直播
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/笔记/" class="nav-link"><i class="undefined"></i>
  笔记
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/网络/" class="nav-link"><i class="undefined"></i>
  网络
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/面试/" class="nav-link"><i class="undefined"></i>
  面试
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/Webpack/" class="nav-link"><i class="undefined"></i>
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/CSS/" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/优化/" class="nav-link"><i class="undefined"></i>
  优化
</a></li></ul></div></div><div class="nav-item"><a href="/ccyblog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/ccyblog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/FrancisSaber" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="./public/avatar.png"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/ccyblog/avatar.png" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    月夕花辰
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>72</h3> <h6 data-v-828910c6>文章</h6></div> <div data-v-828910c6><h3 data-v-828910c6>19</h3> <h6 data-v-828910c6>标签</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/ccyblog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ccyblog/categories/配置/" class="nav-link"><i class="undefined"></i>
  配置
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/vue/" class="nav-link"><i class="undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/手写题/" class="nav-link"><i class="undefined"></i>
  手写题
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/直播/" class="nav-link"><i class="undefined"></i>
  直播
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/笔记/" class="nav-link"><i class="undefined"></i>
  笔记
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/网络/" class="nav-link"><i class="undefined"></i>
  网络
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/面试/" class="nav-link"><i class="undefined"></i>
  面试
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/Webpack/" class="nav-link"><i class="undefined"></i>
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/CSS/" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/ccyblog/categories/优化/" class="nav-link"><i class="undefined"></i>
  优化
</a></li></ul></div></div><div class="nav-item"><a href="/ccyblog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/ccyblog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/FrancisSaber" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="./public/avatar.png"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>打包工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html" aria-current="page" class="active sidebar-link">WebPack简介</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>月夕花辰</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2022
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">WebPack简介</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>月夕花辰</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="webpack简介"><a href="#webpack简介" class="header-anchor">#</a> WebPack简介</h1> <p><font color="orange">Webpack解决了模块打包问题</font></p> <h2 id="何为webpack"><a href="#何为webpack" class="header-anchor">#</a> 何为Webpack</h2> <p><font color="orange">		Webpack是一个开源的JavaScript模块打包工具，其最核心的功能是解决模块之间的依赖，把各个模块按照特定的规则和顺序组织在一起，最终合并为一个JS文件</font>(有时会有多个，这里讨论的只是最基本的情况)。这个过程就叫作模块打包。</p> <h3 id="何为模块"><a href="#何为模块" class="header-anchor">#</a> 何为模块</h3> <p>​		一个npm包或者一个提供工具方法的JS文件都可以称为一个模块。</p> <p>​		在设计程序结构时，把所有代码都堆到一起是非常糟糕的做法。更好的组织方式是按照特定的功能将其拆分为多个代码段，每个代码段实现一个特定的目的。你可以对其进行独立的设计、开发和测试，最终通过接口来将它们组合在一起。这就是基本的模块化思想。</p> <p>​		如果把程序比作一个城市，这个城市内部有不同的职能部门，如学校、医院、消防局等。程序中的模块就像这些职能部门一样，每一个都有其特定的功能。各个模块协同工作,才能保证程序的正常运转。</p> <h3 id="javascript中的模块"><a href="#javascript中的模块" class="header-anchor">#</a> JavaScript中的模块</h3> <p>​		通常一个复杂的网页需要引入多个<code>script</code>文件，这会导致如下问题</p> <ul><li><p>需要手动维护JavaScript的加载顺序。<font color="orange">页面的多个script之间通常会有依赖关系，但由于这种依赖关系是隐式的，</font>除了添加注释以外很难清晰地指明谁依赖了谁，这样当页面中加载的文件过多时就很容易出现问题。</p></li> <li><p>每一个script标签都意味着需要向服务器请求一次静态资源，在HTTP 2还没出现的时期，建立连接的成本是很高的，过多的<font color="orange">请求会严重拖慢网页的渲染速度。</font></p></li> <li><p>在每个script标签中，顶层作用域即全局作用域，如果没有任何处理而直接在代码中进行变量或函数声明，就会<font color="orange">造成全局作用域的污染。</font></p> <p>模块化解决的问题</p></li> <li><p><font color="orange">通过模块化可以清晰看到模块之间的依赖关系</font></p></li> <li><p><font color="orange">模块可以借助工具打包，页面加载合并后的资源文件，减少了网络开销。</font></p></li> <li><p>多个模块之间的作用域是隔离的，彼此之间不会有命名冲突</p></li></ul> <h3 id="模块打包工具"><a href="#模块打包工具" class="header-anchor">#</a> 模块打包工具</h3> <p>​		模块打包工具的任务就是解决模块之间的依赖，使其打包后的结果能够运行在浏览器上，其工作方式如下</p> <ul><li><font color="orange">将存在依赖的模块按照特定的规则分为单个JS文件，一次性全部加载进页面</font></li> <li><font color="orange">在页面初始时加载一个入口模块，其他模块异步地进行加载</font></li></ul> <h3 id="wepack的优势"><a href="#wepack的优势" class="header-anchor">#</a> Wepack的优势</h3> <img src="WebPack学习笔记/image-20211013225802277.png" alt="image-20211013225802277" style="zoom:80%;"> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>​		Webpack不对操作系统有要求，它依赖于Node.js。</p> <div class="language- extra-class"><pre><code>	全局安装 Webpack 的好处是npm会帮我们绑定一个命令行环境变量，一次安装、处处运行;本地安装则会添加其成为项目中的依赖，只能在项目内部使用。这里建议使用本地安装的方式，主要有以下两点原因:
</code></pre></div><ul><li><p>如果采用全局安装，那么在与他人进行项目协作的时候，由于每个人系统中的
Webpack 版本不同，可能会导致输出结果不一致。</p></li> <li><p>部分依赖于Webpack 的插件会调用项目中 Webpack 的内部模块．这种情况下仍
然需要在项目本地安装 Webpack，而如果全局和本地都有，则容易造成混淆。</p></li> <li><p><img src="WebPack%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20211021102419142.png" alt="image-20211021102419142"></p></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>  npm init 初始化命令
  输入项目名后其余默认就行
  安装Webpack
  npm install webpack webpack-cil --save-dev
  这里我们同时安装了webpack 以及 webpack-cli。webpack是核心模块，webpack-cli 则是命令行工具,在本例中两者都是必需的。
  安装结束之后，在命令行执行npx webpack -v以及npx webpack-cli -v，可显示各自的版本号，即证明安装成功。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="应用打包"><a href="#应用打包" class="header-anchor">#</a> 应用打包</h2> <h3 id="通过打包命令打包"><a href="#通过打包命令打包" class="header-anchor">#</a> 通过打包命令打包</h3> <img src="WebPack学习笔记/image-20211014155020848.png" alt="image-20211014155020848" style="zoom:80%;"> <div class="language- line-numbers-mode"><pre class="language-text"><code>//在工程下添加以上几个文件后，在控制台输入如下打包命令、
npx webpack --entry=. /index.js --output-filename=bundle.js --mode=development
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>命令行的第1个参数<code>entry</code>是资源打包的入口。Webpack从这里开始进行模块依赖的查找，得到项目中包含index.js和 add-content.js两个模块，并通过它们来生成最终产物。</li> <li>命令行的第2个参数<code>output-filename</code>是输出资源名。你会发现<font color="orange">打包完成后工程中出现了一个dist目录，其中包含的bundle.js就是 Webpack 的打包结果。</font></li> <li>最后的参数mode指的是打包模式。Webpack为开发者提供了development、production ,none三种模式。当置于development和 production模式下时，它会自动添加适合于当前模式的一系列配置，减少了人为的工作量。在开发环境下，一般设置为development模式就可以了。</li></ul> <h3 id="使用-npm-scripts"><a href="#使用-npm-scripts" class="header-anchor">#</a> 使用 npm scripts</h3> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack --entry=./index.js --output-filename=bundle.js --mode=development&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>​	<font color="orange"><code>scripts</code>是 <code>npm</code>提供的脚本命令功能，在这里我们可以直接使用由模块所添加的指令(比如用“webpack”取代之前的“npx webpack”)。 </font> <font color="pink">执行 <code>npm run build</code> 取代</font></p> <h3 id="使用默认配置目录"><a href="#使用默认配置目录" class="header-anchor">#</a> 使用默认配置目录</h3> <ul><li><font color="orange">上面的index.js是放在工程根目录下的，而通常情况下我们会分别设置源码目录与资源输出目录。工程源代码放在<code>/src</code>中，输出资源放在<code>/dist</code>中。</font></li> <li><font color="orange">Webpack 默认的源代码的入口就是 <code>src/index.js</code>，因此可以省去build中的  <code>--entry=./index.js</code></font></li></ul> <h3 id="使用配置文件"><a href="#使用配置文件" class="header-anchor">#</a> 使用配置文件</h3> <p>​	当项目需要越来越多的配置时，就要往命令加入更多参数，为了解决后期维护困难的问题，需要将参数以对象形式专门放在一个配置文件里，Webpack每次打包从该文件读取配置即可。(<font color="orange">省去了script的build长命令</font>)</p> <p><font color="orange">	Webpack默认的配置文件为 <code>webpack.config.js</code></font></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js   </span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'bundle.js'</span>    <span class="token comment">//输出文件</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">'development'</span>
<span class="token punctuation">}</span>
<span class="token comment">// package.json</span>
<span class="token string-property property">&quot;script&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack&quot;</span>	从默认配置文件读取
<span class="token punctuation">}</span>
<span class="token comment">//执行 npm run build 可更新</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>​	之前的参数--output-filename和--output-path现在都成为了output下面的属性。filename和先前一样都是bundle.js，不需要改动，而path和之前有所区别。<font color="orange">Webpack对于output.path的要求是使用绝对路径(从系统根目录开始的完整路径)</font>，之前我们在命令行中为了简洁所以使用了相对路径。而在webpack.config.js中，我们通过调用Node.js的路径拼装函数———path.join，将<font color="pink">_dirname ( Node.js内置全局变量，值为当前文件所在的绝对路径)</font>与dist(输出目录)连接起来，得到了最终的资源输出路径。</p> <h3 id="webpack-dev-server"><a href="#webpack-dev-server" class="header-anchor">#</a> webpack-dev-server</h3> <p>​	通过 <code>webpack-dev-server</code> 本地开发工具，即可无需手动执行 <code>npm run build</code> 就可更新输出文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install webpack-dev-server --save-dev

module.export = {
	entry:&quot;./src/index.js&quot;,
	output:...,
	devServer:{
		publicPath:'/dist'
	}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>​	需要在配置中添加 <code>devServer</code>对象，其作用是接收浏览器的请求，将资源返回。当服务启动时，会先让Webpack进行模块打包并准备好资源（输出文件）。当<code>webpack-dev-server</code>接收到浏览器的资源请求时，<font color="orange">它会首先进行URL地址校验。如果该地址是资源服务地址(上面配置的publicPath)</font>，就会从 Webpack 的打包结果中寻找该资源并返回给浏览器。反之，如果请求地址不属于资源服务地址，则直接读取硬盘中的源文件并将其返回。</p> <h4 id="webpack-dev-server的两大职能"><a href="#webpack-dev-server的两大职能" class="header-anchor">#</a> webpack-dev-server的两大职能:</h4> <ul><li>令Webpack 进行模块打包（无需手动<code>run build</code>），并处理打包结果的资源请求。</li> <li>作为普通的Web Server，处理静态资源文件请求。</li></ul> <p>直接用Webpack和使用webpacl-dev-server有一个很大的区别，前者每次都会生成一个bundle.js（输出文件），<font color="orange">后者只是将打包结果放在内存中，并不会写入实际的<code>bundle.js</code>,每次接收请求都是将内存的的打包结果返回。因此，如果配置了webpack-dev-server，即使删除了dist的输出文件，页面也可正常刷新。</font></p> <p><font color="orange">webpack-dev-server 还可以自动刷新</font>，让本地服务保持启动以及浏览器打开的状态。</p> <h1 id="模块打包"><a href="#模块打包" class="header-anchor">#</a> 模块打包</h1> <h2 id="commonjs"><a href="#commonjs" class="header-anchor">#</a> CommonJS</h2> <h3 id="模块"><a href="#模块" class="header-anchor">#</a> 模块</h3> <p>​		<font color="pink">CommonJS中规定每个文件是一个模块</font>。将一个JavaScript文件直接通过<code>script</code>标签插人页面中与封装成CommonJS模块最大的不同在于，<font color="orange">前者的顶层作用域是全局作用域，在进行变量及函数声明时会污染全局环境;而后者会形成一个属于模块自身的作用域，所有的变量及函数只有自己能访问，对外是不可见的。</font>请看下面的例子:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//calculator.js</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'calculator.js'</span><span class="token punctuation">;</span>
<span class="token comment">//index.js</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'index.js'</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./calculator.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">;</span> 		<span class="token comment">//index .js 不会被require的name污染</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>​		这里有两个文件，在index.js中我们通过CommonJS的 require函数加载calculator.js。运行之后控制台结果是“index.js”,这说明calculator.js中的变量声明并不会影响index.js，可见每个模块是拥有各自的作用域的。</p> <h3 id="导出"><a href="#导出" class="header-anchor">#</a> 导出</h3> <p>​		<font color="orange">导出是一个模块向外暴露自身的唯一方式。</font>在CommonJS中，通过<font color="orange"><code>module.exports</code>可以导出模块中的内容，</font>如:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'calculator'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> a<span class="token operator">+</span>b
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">CommonJS模块内部会有一个module对象用于存放当前模块的信息，可以理解成在每个模块的最开始定义了以下对象</span><span class="token operator">:</span>
<span class="token keyword">var</span> module <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//模块自身逻辑</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>	  	<span class="token comment">//将要导出的内容放到此对象的exports属性对象内</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="另一种导出写法"><a href="#另一种导出写法" class="header-anchor">#</a> 另一种导出写法</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'calcyulator'</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> a<span class="token operator">+</span>b <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><font color="orange">简单的理解就是每一个CommonJS文件内部自动加上了以下代码 </font></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> module <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">exports</span> <span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports
<span class="token comment">// 因此可以通过另一种写法导出</span>
<span class="token comment">// 但是不能直接给exports，否则相当于重分配exports指向对象</span>
即 exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="exports-和-module-exports-混用也会导致属性丢失"><a href="#exports-和-module-exports-混用也会导致属性丢失" class="header-anchor">#</a> exports 和 module.exports 混用也会导致属性丢失</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'111'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 此时 name属性会丢失</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><font color="orange">另外，要注意导出语句不代表模块的末尾，在module.exports或exports后面的代码依旧会照常执行。</font></p> <h3 id="导入"><a href="#导入" class="header-anchor">#</a> 导入</h3> <p><font color="orange"><strong>使用<code>require</code>进行模块导入</strong></font></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// test.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> a<span class="token operator">+</span>b
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// index.js</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./test.js'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> sum <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>  <span class="token comment">//5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>我们在 index.js 中导人了calculator模块，并调用了它的add函数。
当我们require一个模块时会有两种情况:</p> <ul><li><font color="orange">require的模块是第一次被加载。这时会首先执行该模块，然后导出内容。</font></li> <li>require的模块曾被加载过。这时该模块的代码不会再次执行，而是直接导出上次执行后得到的结果。</li></ul> <p>模块会有一个module对象用来存放其信息，这个对象中有一个属性<code>loaded</code> 用于记录该模块是否被加载过。它的值默认为false，当模块第一次被加载和执行过后会置为true，后面再次加载时检查到<code>module.loaded</code>为<code>true</code>，则不会再次执行模块代码。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>有时我们加载一个模块，不需要获取其导出的内容，只是想要通过执行它而产生某种作用，比如把它的接口挂在全局对象上，此时直接使用require即可。
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./task.js'</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//另外，require函数可以接收表达式，借助这个特性我们可以动态地指定模块加载路径。</span>
<span class="token keyword">const</span> moduleNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'foo.js'</span><span class="token punctuation">,</span> <span class="token string">'bar.js'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>moduleNames<span class="token punctuation">.</span><span class="token function">forFach</span><span class="token punctuation">(</span><span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">rcgquire</span><span class="token punctuation">(</span> <span class="token string">'./'</span> <span class="token operator">+</span> name<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="es6-module"><a href="#es6-module" class="header-anchor">#</a> ES6 Module</h2> <h3 id="模块-2"><a href="#模块-2" class="header-anchor">#</a> 模块</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ES6 默认导入导出形式</span>
<span class="token comment">// calculator.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'calculator.js'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">//index.js</span>
<span class="token keyword">import</span> calculator <span class="token keyword">from</span> <span class="token string">'./calculator.js'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>calculator<span class="token punctuation">.</span>name<span class="token punctuation">)</span>	<span class="token comment">//calculator.js</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>​		ES6 Modulc也是将每个文件作为一个模块，每个模块拥有自身的作用域，不同的是导入、导出语句。import 和 export 也作为保留关键字在ES6版本中加入了进来(CommonJS中的module并不属于关键字)。
​		ES6 Module 会自动采用严格模式，这在ESS ( ECMAScript 5.0)中是一个可选项。以前我们可以通过选择是否在文件开始时加上“use strict”来控制严格模式，<font color="orange">在ES6Module中不管开头是否有“use strict”，都会采用严格模式。如果将原本是CommonJS的模块或任何未开启严格模式的代码改写为ES6 Module要注意这点。</font></p> <h3 id="导出-2"><a href="#导出-2" class="header-anchor">#</a> 导出</h3> <ul><li>命名导出</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 写法1</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'calculator'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a<span class="token operator">+</span>b <span class="token punctuation">}</span>
<span class="token comment">// 写法2</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'calculator'</span>
<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a<span class="token operator">+</span>b <span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> add<span class="token punctuation">}</span>		
<span class="token comment">//重命名导出</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> add <span class="token keyword">as</span> getSum<span class="token punctuation">}</span>  <span class="token comment">//将add重命名为getSum</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>默认导出</li></ul> <p><font color="orange">默认导出只能有一个</font></p> <p>我们可以将<code>export default</code>理解为对外输出了一个名为<code>default</code>的变量，因此不需要像命名导出一样进行变量声明,直接导出值即可。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'calculator'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">' this is a string'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="导入-2"><a href="#导入-2" class="header-anchor">#</a> 导入</h3> <ul><li>引入命名导出模块
<font color="pink">import 后要加花括号</font></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> name <span class="token operator">=</span> <span class="token string">'calculator.js'</span>
<span class="token keyword">export</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">}</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> add<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./ca;culator.js'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> add <span class="token keyword">as</span> getSum<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./ca;culator.js'</span>		<span class="token comment">//重命名导入</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> calculator <span class="token keyword">from</span> <span class="token string">'./calucaltre'</span>		<span class="token comment">//整体导入并重命名</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>引入默认导出</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'11'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>	
<span class="token keyword">import</span> <span class="token function">name</span><span class="token punctuation">(</span>可以随意命名name<span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token string">'./calculator'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token keyword">default</span> <span class="token keyword">as</span> myCalculator<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Calculator'</span> 重命名默认导出
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="混合导入"><a href="#混合导入" class="header-anchor">#</a> 混合导入</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="复合写法"><a href="#复合写法" class="header-anchor">#</a> 复合写法</h3> <p>​		在工程中，有时需要<font color="orange">把某一个模块导入之后立即导出，比如专门用来集合所有页面或组件的入口文件。此时可以采用复合形式的写法:</font></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> add <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./calculator.js'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​			复合写法目前只支持当被导入模块(这里的calculator.js)通过命名导出的方式暴露出来的变量，默认导出则没有对应的复合形式，只能将导入和导出拆开写。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> calculator <span class="token keyword">from</span> <span class="token string">&quot; ./calculator.js &quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> calculator<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="commonjs和es6-module的区别"><a href="#commonjs和es6-module的区别" class="header-anchor">#</a> CommonJS和ES6 Module的区别</h2> <h3 id="动态于静态"><a href="#动态于静态" class="header-anchor">#</a> 动态于静态</h3> <p>​		CommonJS 与 ES6 Module最本质的区别在于前者对模块依赖的解决是“动态的”，而后者是“静态的”。<font color="orange">在这里“动态”的含义是，模块依赖关系的建立发生在代码运行阶段;而“静态”则是模块依赖关系的建立发生在代码编译阶段。</font></p> <p>​		由于在CommonJS的代码执行前，无法明确依赖关系，只能在执行时确认。而ES6 Module的导入导出语句必须位于模块的顶层作用域。在编译阶段便可确认模块的依赖关系。</p> <p>ES6 Module的优势</p> <ul><li>死代码检测和排除：通过静态分析工具去除那些未被调用的模块。在打败时去除。</li> <li>模块变量检查：确保模块之间传的值或接口类型类型是正确的。（比如确保字符串不会被当成函数使用）</li> <li>编辑器优化：ES6支持直接导入变量，减少引用层级，提高程序执行效率。</li></ul> <h3 id="值拷贝和动态映射"><a href="#值拷贝和动态映射" class="header-anchor">#</a> 值拷贝和动态映射</h3> <p>​		 <font color="orange">在导入一个模块时，对于CommonJS来说获取的是一份导出值的拷贝;而在ES6Module 中则是值的动态映射,并且这个映射是只读的。</font></p> <ul><li>对一个引入其他模块的Common来说，修改引入值并不会改变被引入文件的变量，而对于ES6的引用来说，他会实时反射被引入文件的变量值，并不可修改，否则会报错。当可以通过被引入文件提供的方法进行修改。</li></ul> <h3 id="循环依赖"><a href="#循环依赖" class="header-anchor">#</a> 循环依赖</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 一个循环依赖的例子</span>
<span class="token comment">// foo.js</span>
<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./bar.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'value of bar'</span><span class="token punctuation">,</span> bar<span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token string">'this is foo.js'</span>
<span class="token comment">// bar.js</span>
<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./foo.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'value of foo:'</span> foo<span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span> <span class="token string">'this is bar'</span>
<span class="token comment">//index.js</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./foo.js'</span><span class="token punctuation">)</span>
<span class="token comment">//输出结果</span>
value <span class="token keyword">of</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
value <span class="token keyword">of</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> This is bar<span class="token punctuation">.</span> js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>分析</strong>：<font color="orange">由于 foo请求bar，bar文件的内容会先执行在执行foo文件，而在bar文件中有调用了foo文件内容，foo文件内容又未导出，因此bar文件输出foo为空对象。</font></p> <p>当<code>index.js</code> 引用了<code>foo.js</code>后，相当于执行了一下函数</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token parameter">moduleId</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 	Create a new module (and put it into the cache)</span>
    <span class="token keyword">var</span> module <span class="token operator">=</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">i</span><span class="token operator">:</span>moduleId<span class="token punctuation">,</span>
        <span class="token literal-property property">l</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exports</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>​		当index.js引用了foo.js之后，相当于执行了这个_webpack_require_函数，初始化了一个module对象并放入installedModules 中。当bar.js再次引用foo.js时，又执行了该函数，但这次是直接从installedModules里面取值，此时它的module.exports是一个空对象。这就解释了上面在第3步看到的现象。(<font color="orange">因为此时不存在引用的模块，因此函数自己创建一个空对象module</font>)</p> <p>​		<font color="orange">在ES6中，同样逻辑的循环依赖也无法正确输出，不过空对象变为undefined</font>，但可以利用ES6的反射特性，在循环的依赖中定义函数，并不执行，而是在返回后（依赖不再为undefined）执行，从而正确输出结果。</p> <h2 id="加载其他类型模块"><a href="#加载其他类型模块" class="header-anchor">#</a> 加载其他类型模块</h2> <h3 id="非模块化文件"><a href="#非模块化文件" class="header-anchor">#</a> 非模块化文件</h3> <p>​		非模块化文件指的是并不遵循任何一种模块标准的文件。如果你维护的是一个几年前的项目，那么极有可能里面会有非模块化文件，最常见的就是在script标签中引入的jQuery及其各种插件。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//	直接引入</span>
<span class="token keyword">import</span> <span class="token string">'./jQuery.min.js'</span>  <span class="token comment">//这段代码会直接执行文件内容 </span>
<span class="token comment">// 但如果引入的非模块化文件是通过隐式全局变量而暴露处的，需要注意</span>
如
<span class="token keyword">var</span> calculator <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="amd-异步模块"><a href="#amd-异步模块" class="header-anchor">#</a> AMD（异步模块）</h3> <p>此种模块可异步加载</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 定义方法</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'getSum'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>calculator<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//第一个参数是当前模块ID，第二个参数是当前模块的依赖，第三个是描述模块导出值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 加载方式</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'getSum'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">getSum</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">getSUm</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//第一个参数代表引入的模块，可以包含多个，第二个是加载完成回调</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="umd-通用模块标志"><a href="#umd-通用模块标志" class="header-anchor">#</a> UMD（通用模块标志）</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//calculator.js</span>
<span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">global<span class="token punctuation">,</span>main</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//根据当前环境采取不同的导出方式</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">=</span>n<span class="token operator">=</span> <span class="token string">' function'</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//AMD</span>
		<span class="token function">define</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//commonJS</span>
		module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">...</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token comment">//非模块化环境global.add = ...;</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//定义模块主体</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>​		UMD是根据当前全局对象的值判断目前处于哪种模块环境。</p> <p>​		需要注意的问题是，<font color="orange">UMD模块一般都最先判断AMD环境</font>，也就是全局下是否有define函数，<font color="orange">而通过AMD定义的模块是无法使用CommonJS或ES6 Module的形式正确引入的。</font><font color="orange">在Webpack 中，由于它同时支持AMD 及 CommonJS，</font>也许工程中的所有模块都是CommonJS，而UMD标准却发现当前有AMD环境，并使用了AMD方式导出，这会使得模块导入时出错。当需要这样做时，<font color="orange">我们可以更改UMD模块中判断的顺序，使其以CommonJS的形式导出即可。</font></p> <h3 id="加载npm模块"><a href="#加载npm模块" class="header-anchor">#</a> 加载npm模块</h3> <p>​		很多语言都有包管理器，比如Java的 Maven，Ruby 的gem。目前，JavaScript最主流的包管理器有两个——npm和 yarn。两者的仓库是共通的，只是在使用上有所区别。截至目前，npm平台上已经有几十万个模块( package，也可称之为包)，并且这个数字每天都在增加，各种主流的框架类库都可以在npm平台上找到。作为开发者，每个人也都可以自己封装模块并上传到npm，通过这种方式来与他人共享代码。</p> <p>​		在本地工程安装和加载外部的npm模块</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>#项目初始化
npm init <span class="token operator">-</span>y
#安装 lodash
npm install lodash
#使用安装的npm包
<span class="token comment">// index.js</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'./lodash'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>​		<font color="orange">当Webpack在打包时解析到这条语句，就会自动去node_modules中寻找名为lodash的模块了，而不需要我们写出从源文件index.js到node_modules中 lodash的路径。</font></p> <p>​		<font color="pink">每一个npm模块都有一个入口。当我们加载一个模块时，实际上就是加载该模块的入口文件。这个入口被维护在模块内部<code>package.json</code>文件的 <code>main</code>字段中。</font>
​		比如对于前面的lodash模块来说，它的 package.json内容如下:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//   ./node_modules/underscore/package.json</span>
<span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span> <span class="token punctuation">,</span>
	<span class="token property">&quot;main&quot;</span> <span class="token operator">:</span> <span class="token string">&quot; lodash.js&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>​		当加载该模块时．实际上加载的是 <code>node_modules/lodash/lodash.js。</code>
​		除了直接加载模块以外，我们也可以通过&lt;package_name&gt;/<path>的形式单独<font color="orange">加载模块内部的某个JS文件。</font>如:</path></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> all <span class="token keyword">from</span> <span class="token string">'lodash/fp/all.js'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span> all<span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>​		<font color="orange">这样，Webpack 最终只会打包node_modules/lodash/fp/all.js这个文件，而不会打包全部的lodash库，通过这种方式可以减小打包资源的体积。</font></p> <h2 id="模块打包原理"><a href="#模块打包原理" class="header-anchor">#</a> 模块打包原理</h2> <p>​		前面的加法模块打包后会成为一下形式（代码的大体结构）bundle.js输出文件</p> <img src="WebPack学习笔记/image-20211016173538935.png" alt="image-20211016173538935" style="zoom:80%;"> <ul><li>最外层立即执行匿名函数。它用来包裹整个bundle，并构成自身的作用域。</li> <li>installedModules对象。每个模块只在第一次被加载的时候执行，之后其导出值就被存储到这个对象里面，当再次被加载的时候直接从这里取值，而不会重新执行。</li> <li><code>_webpack_require_</code>函数。对模块加载的实现，在浏览器中可以通过调用<code>_webpack_require_(module_id)</code>来完成模块导入。</li> <li><code>modules</code>对象。工程中所有产生了依赖关系的模块都会以key-value的形式放在这里。<code>key</code>可以理解为一个模块的<code>id</code>，由数字或者一个很短的hash字符串构成;value则是由一个匿名函数包裹的模块实体，匿名函数的参数则赋予了每个模块导出和导入的能力。</li></ul> <h1 id="资源输入输出"><a href="#资源输入输出" class="header-anchor">#</a> 资源输入输出</h1> <p>​		在一切流程的最开始，我们需要指定一个或多个入人口 ( entry)，也就是告诉Webpack 具体从源码目录下的哪个文件开始打包。如果把工程中各个模块的依赖关系当作一棵树，那么入口就是这棵依赖树的根，如图3-1所示。
<img src="WebPack学习笔记/image-20211016202013178.png" alt="image-20211016202013178" style="zoom:80%;">
​		这些存在依赖关系的模块会在打包时被封装为一个chunk。</p> <p>​		**<code>chunk</code>概念：**chunk字面的意思是代码块，在 Webpack 中可以理解成被抽象和包装过后的一些模块。它就像一个装着很多文件的文件袋，里面的文件就是各个模块，Webpack在外面加了一层包裹，从而形成了chunk。根据具体配置不同，一个工程打包时可能会产生一个或多个chunk。</p> <img src="WebPack学习笔记/image-20211016202334457.png" alt="image-20211016202334457" style="zoom:80%;"> <p>​		在工程中可以定义多个入口，每一个入口都会产生一个结果资源。比如我们工程中有两个入口 src/index.js 和 src/lib.js，在一般情形下会打包生成dist/index.js和 dist/lib.js，因此可以说,entry 与 bundle存在着对应关系，如图3-3所示。<img src="WebPack学习笔记/image-20211016202436037.png" alt="image-20211016202436037" style="zoom:80%;"></p> <h2 id="配置资源入口"><a href="#配置资源入口" class="header-anchor">#</a> 配置资源入口</h2> <p>​		Webpack通过context和 entry这两个配置项来共同决定人口文件的路径。在配置入口时，实际上做了两件事:</p> <ul><li>确定入口模块位置，告诉 Webpack从哪里开始进行打包。</li> <li><font color="orange">定义chunk name。如果工程只有一个入口，那么默认其<code>chunk name</code>为“<code>main</code>&quot;；如果工程有多个入口，我们需要为每个人口定义<code>chunk name</code>，来作为该<code>chunk</code>的唯一标识。</font></li></ul> <h3 id="context"><a href="#context" class="header-anchor">#</a> context</h3> <p>​		资源入口的路径前缀，配置时要求使用绝对路径</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//以下两种配置达到的效果相同，入口都为&lt;工程根路径&gt;/src/scripts/index.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">context</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src/scripts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">'./scripts/index.js'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">context</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src/scripts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">context</span><span class="token operator">:</span><span class="token string">'./index.js'</span>
<span class="token punctuation">}</span>
<span class="token comment">//配置context的主要目的是让entry的编写更加简洁，尤其是在多入口的情况下。</span>
<span class="token comment">//context可以省略，默认值为当前工程的根目录</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="entry"><a href="#entry" class="header-anchor">#</a> entry</h3> <p>​		与<code>context</code> 只能为字符串不同,<code>entry</code>的配置可以有多种形式:字符串、数组、对象、函数。可以根据不同的需求场景来选择。</p> <ol><li><p>字符串类型入口</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//直接传入文件路径</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">'development'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>数组类型入口（<font color="orange">目的是为了合并文件，以最后一个为实际入口</font>）</p> <p>传入一个数组的作用是将多个资源预先合并，在打包时Webpack 会将数组中的最后一个元素作为实际的入口路径。如:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//直接传入文件路径</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'babel-ployfill'</span><span class="token punctuation">,</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>等同于</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//直接传入文件路径</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">//index.js</span>
<span class="token keyword">import</span> <span class="token string">'babel-ployfill'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>对象类型入口
<font color="orange">如果想要定义多人口,则必须使用对象的形式。对象的属性名(key)是chunkname，属性值(value)是入口路径。如:</font></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">//chunk name为index，入口路径为./src/index.js</span>
        <span class="token literal-property property">index</span> <span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
        <span class="token comment">//chunk name为lib，入口路径为./src/lib.js</span>
        <span class="token literal-property property">lib</span><span class="token operator">:</span> <span class="token string">'./src/lib.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//对象的属性值也可以为字符串或数组。如:</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">index</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'babel-polyfil1'</span><span class="token punctuation">,</span> 'src<span class="token operator">/</span>index<span class="token punctuation">.</span>js&quot;<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">lib</span><span class="token operator">:</span><span class="token string">'./src/lib.js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>，
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><font color="orange">在使用字符串或数组定义单入口时，并没有办法更改chunk name，只能为默认的“main”。<u>在使用对象来定义多入口时，则必须为每一个入口定义chunk name</u>。函数类型入口</font></p></li> <li><p>函数类型入口
用函数定义入口时，只要返回上面介绍的任何配置形式即可，如:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">entry</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 返回对象类型</span>
        <span class="token literal-property property">index</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'xx'</span><span class="token punctuation">,</span> <span class="token string">'./src/index'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">lib</span><span class="token operator">:</span><span class="token string">'./src/lib.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 加入动态逻辑获取工程入口</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">entry</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>	<span class="token comment">//异步获取入口路径</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./src/index.js'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ol> <h3 id="实例"><a href="#实例" class="header-anchor">#</a> 实例</h3> <ol><li><p>单页应用<font color="orange">单页面应用（SPA）一般定义单一入口即可</font></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">'./src/index.js'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>​		无论是框架、库，还是各个页面的模块，都由app.js单一的入口进行引用。这样做的好处是只会产生一个JS文件，依赖关系清晰。而这种做法也有弊端，即所有模块都打包到一起，当应用的规模上升到一定程度之后会导致产生的资源体积过大，降低用户的页面渲染速度。</p></li> <li><p>提取vendor
<code>vendor</code>一般指工程所使用的1库，框架、第三方模块集中打包而产生的<code>bundle</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">context</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">app</span><span class="token operator">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">vendor</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'react-dom'</span><span class="token punctuation">,</span> <span class="token string">'react-router'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>此配置添加了vendor作为vendor的入口，并通过数组的形式把工程依赖变成第三方模块加入。</p> <p><font color="orange">采用<code>optimization.splitChunks</code></font>，<u><font color="orange">将app 与vendor这两个chunk 中的公共模块提取出来</font></u>。通过这样的配置，<font color="pink">app.js产生的 bundle将只包含业务模块，其依赖的第三方模块将会被抽取出来生成一个新的bundle</font>，这也就达到了我们提取vendor 的目标。由于vendor仅仅包含第三方模块，这部分不会经常变动，因此可以<font color="orange">有效地利用客户端缓存，在用户后续请求页面时会加快整体的渲染速度。</font></p></li> <li><p>多页应用
为了尽量减小资源体积，每个页面都只加载必要的逻辑，每个页面有各自的<code>bundle</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">pageA</span><span class="token operator">:</span><span class="token string">'./src/pageA.js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pageB</span><span class="token operator">:</span><span class="token string">'./src/pageB.js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pageC</span><span class="token operator">:</span><span class="token string">'./src/pageC.js'</span>，
        <span class="token literal-property property">vendor</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'react-dom'</span><span class="token punctuation">,</span> <span class="token string">'react-router'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <h2 id="配置资源出口"><a href="#配置资源出口" class="header-anchor">#</a> 配置资源出口</h2> <p><font color="prange">与出口相关的配置都集中在output对象</font></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'assets'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">publicPath</span><span class="token operator">:</span><span class="token string">'/dis/'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="filename"><a href="#filename" class="header-anchor">#</a> <code>filename</code></h3> <p>​		<code>filename</code>的作用是控制输出资源的文件名，其形式为字符串。<code>filename</code>不仅可以是bundle的名字，还可以是相对路径，如果路径不存在webpack也会在输出资源时创建该目录。</p> <h4 id="动态生成输出文件名"><a href="#动态生成输出文件名" class="header-anchor">#</a> 动态生成输出文件名</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">app</span><span class="token operator">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">vendor</span><span class="token operator">:</span><span class="token string">'./src/vendor.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'[name].js'</span><span class="token punctuation">,</span>   <span class="token comment">//输出 index.js、vendor.js</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在资源输出时，上面配置的[name]会被替换成chunk name，即输入文件名</p> <img src="WebPack学习笔记/image-20211019170401519.png" alt="image-20211019170401519" style="zoom:80%;"> <p>上述变量一般有如下两种作用:</p> <ul><li>当有多个 chunk存在时对不同的chunk进行区分。如<code>[name]、[chunkhash]</code>和<code>[id]</code>，它们对于每个chunk来说都是不同的。</li> <li>控制客户端缓存。表中的[hash]和 [chunkhash]都与chunk 内容直接相关，在<code>filename</code>中使用了这些变量后，当chunk 的内容改变时，可以同时引起资源文件名的更改，从而使用户在下一次请求资源文件时会立即下载新的版本而不会使用本地缓存。<code>[query]</code>也可以起到类似的效果，只不过它与chunk 内容无关，要由开发者手动指定。</li></ul> <p>在实际工程中，使用最多的还是[name]，它与chunk是一一对应的关系，可读性高，如果需要控制客户端缓存，最好加上[chunkhash]，<font color="orange">每个chunk所产生的哈希值只跟自身内容有关，单个chunk改变不会影响其他资源，可精确控制客户端缓存</font></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">output</span><span class="token operator">:</span><span class="token string">'[name]@[chunkhash].js'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><img src="WebPack学习笔记/image-20211019170801518.png" alt="image-20211019170801518" style="zoom:80%;"> <h3 id="path"><a href="#path" class="header-anchor">#</a> path</h3> <p><code>path</code> 可以<font color="orange">指定资源输出的位置，要求值必须为绝对路径</font>。如:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span> <span class="token operator">:</span> <span class="token string">'./src/app.js'</span> <span class="token punctuation">,</span>
    <span class="token literal-property property">output</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span> <span class="token operator">:</span> <span class="token string">'bundle.js'</span> <span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><font color="orange">上述配置会将资源输出位置设置为工程的<code>dist</code>目录。在webpack4以前的版本中，打包默认会生成在工程的根目录，因此需要加上以上配置，在webpack4后，<code>output.path</code>默认为dist目录，除法需要更改，否则无需单独配置。</font></p> <h3 id="publicpath"><a href="#publicpath" class="header-anchor">#</a> <code>publicPath</code></h3> <p>​		publicPath用来指定资源的请求位置（请求地址），path用来指定资源的输出位置（打包完放在哪）。</p> <ul><li>输出位置：打包完成后资源产生的目录，一般将其指定为工程中的dist目录。</li> <li><font color="orange">请求位置</font>：由JS或CSS所请求的间接资源路径。页面中的资源分为两种，一种是由HTML页面直接请求的，比如通过script标签加载的JS;另一种是由JS或CSS请求的，如异步加载的JS、从 CSS请求的图片字体等。publicPath 的作用就是指定这部分间接资源的请求位置。</li></ul> <h4 id="html相关"><a href="#html相关" class="header-anchor">#</a> HTML相关</h4> <p>​		<font color="orange">与HTML相关，也就是说我们可以将<code>publicPath</code>指定为HTML的<u>相对路径</u>，在请求这些资源时会以当前页面HTML所在路径加上相对路径，构成实际请求的URL。如:</font></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//假设当前HTML地址为https://example.com/app/index.html</span>
<span class="token comment">//异步加载的资源名为0.chunk.js</span>
<span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>		<span class="token comment">//实际路径https://example.com/app/0.chunk.js</span>
<span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&quot;./js&quot;</span> 	 <span class="token comment">//实际路径https://example.com/app/js/0.chunk.js</span>
<span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&quot;../assets/&quot;</span> <span class="token comment">//实际路径https://example.com/aseets/0.chunk.js</span>
以最后以一个文件的相对地址
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="host相关"><a href="#host相关" class="header-anchor">#</a> Host相关</h4> <p>若<code>publicPath</code> 的值以<code>“/”</code>开始，则代表此时publicPath是以当前页面的 host name为基础路径的。如:
<font color="orange">去除  .com后的替换为<code>publicPath</code>的路径</font></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//假设当前HTML地址为https://example.com/ app/index.html</span>
<span class="token comment">//异步加载的资源名为0.chunk.js</span>
<span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span>		<span class="token comment">//实际路径https://example.com/0.chunk.js</span>
<span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&quot;/js&quot;</span> 	 <span class="token comment">//实际路径https://example.com/js/0.chunk.js</span>
<span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&quot;/dist/&quot;</span> <span class="token comment">//实际路径https://example.com/dist/0.chunk.js</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="cnd相关"><a href="#cnd相关" class="header-anchor">#</a> CND相关</h4> <p>​		上面两种配置都是相对路径，我们也可以使用绝对路径的形式配置publicPath。这种情况一般发生于静态资源放在CDN上面时，<font color="orange">由于其域名与当前页面域名不一致，需要以绝对路径的形式进行指定</font>。当publicPath 以协议头或相对协议的形式开始时，代表当前路径是CDN相关。如:</p> <p>​		<font color="pink">webpack-dev-server 的配置中也有一个publicPath，值得注意的是，这个publicPath与Webpack 中的配置项含义不同，它的作用是指定webpack-dev-server的静态资源服务路径。请看下面的例子:</font></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'[name].js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span><span class="token string">'/assets/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span><span class="token number">3000</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>​		<code>output.path</code>的路径指向<code>dist</code>，，启动webpack-dev-server后，访问<code>localhost：3000/dist/bundle.js</code>结果为404。是因为的<code>devServer</code>的 <code>publicPath</code>将资源位置指向了<code>localhost：3000/assets/bundle.js</code></p> <p><font color="orange">为了避免开发环境与生成环境不一致而造成问题，可以保持webpack-dev-server和publicPath的<code>output.path</code>一致</font></p> <h3 id="实例-2"><a href="#实例-2" class="header-anchor">#</a> 实例</h3> <h4 id="单入口"><a href="#单入口" class="header-anchor">#</a> 单入口</h4> <p><font color="pink">对于单入口场景，不必设置动态的<code>output.filename</code>.资源的源代码目录为src，输出目录为dist，如果配置了devServer，需要配置publicPath为dist。</font></p> <h4 id="多入口"><a href="#多入口" class="header-anchor">#</a> 多入口</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span> <span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">pageA</span><span class="token operator">:</span> <span class="token string">'./src/pageA.js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pageB</span><span class="token operator">:</span> <span class="token string">'./src/pageB.js'</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token literal-property property">devserver</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'/dist/'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span> <span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//无需配置output的path，因为已经默认了dist</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <ul><li>在配置打包入口时，context相当于路径前缀，entry是入口文件路径。单入口的chunk name不可更改，多入口的话则必须为每一个chunk指定chunk name。</li> <li>当第三方依赖较多时，我们可以用提取vendor的方法将这些模块打包到一个单独的 bundle 中，以更有效地利用客户端缓存，加快页面渲染速度。</li> <li><code>path</code>和 <code>publicPath</code>的区别在于path指定的是资源的输出位置，而<code>publicPath</code>指定的是间接资源的请求位置。</li></ul> <h1 id="预处理器"><a href="#预处理器" class="header-anchor">#</a> 预处理器</h1> <p><font color="orange">预处理器赋予了Webpack可处理不同类型资源的能力</font></p> <h2 id="一切皆模块"><a href="#一切皆模块" class="header-anchor">#</a> 一切皆模块</h2> <img src="WebPack学习笔记/image-20211019175447656.png" alt="image-20211019175447656" style="zoom:80%;"> <p>左边是样式和JS分开处理，每次添加或删除都要进行两次操作，引入删除JS，引入删除SCSS。</p> <p>右边只需单独删除JS文件就行</p> <h2 id="loader概述"><a href="#loader概述" class="header-anchor">#</a> loader概述</h2> <p>​		每个loader本质上都是一个函数。在 Webpack 4之前，函数的输入和输出都必须为字符串;在 Webpack 4之后，loader也同时支持抽象语法树(AST)的传递，通过这种方法来减少重复的代码解析。用公式表达 loader 的本质则为以下形式:
​									<code>output = loader(input)</code>
​		<code>input</code>也可能是另一个loader的返回结果包括转化后的结果（也是字符串类型)、source map，以及AST对象;output同样包含这几种信息．转化后的文件字符串、source map，以及 AST。如果这是最后一个 loader,结果将直接被送到Webpack进行后续处理，否则将作为下一个loader的输入向后传递。</p> <p>​		loader是链式的，可以对一个资源设置多个loader，第一个的loader输入是文件源码，之后的所以loader为上一个loader的输出</p> <img src="WebPack学习笔记/image-20211019180253569.png" alt="image-20211019180253569" style="zoom:80%;"> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">handler</span> <span class="token punctuation">(</span>content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span> <span class="token punctuation">(</span>
        <span class="token keyword">null</span><span class="token punctuation">,</span>               <span class="token comment">//error</span>
        result<span class="token punctuation">.</span>content<span class="token punctuation">,</span>     <span class="token comment">//转换后的内容</span>
        result<span class="token punctuation">.</span>map   	    <span class="token comment">//转换后的source-map</span>
        result<span class="token punctuation">.</span>mata		    <span class="token comment">//转换后的AST</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>​			<font color="orange">loader本身为一个函数，在该函数接收到的内容进行转换，然后返回转换后的结果。</font></p> <h2 id="loader配置"><a href="#loader配置" class="header-anchor">#</a> loader配置</h2> <p>​           <code>loader</code>的字面意思是装载器，在 Webpack中它的实际功能则更像是预处理器。<font color="pink">Webpack本身只认识JavaScript</font>，<font color="orange">对于其他类型的资源必须预先定义一个或多个loader对其进行转译</font>，输出为Webpack 能够接收的形式再继续进行，因此loader做的实际上是一个预处理的工作。</p> <h3 id="loader的引入"><a href="#loader的引入" class="header-anchor">#</a> loader的引入</h3> <p>​		Webpack无法直接处理CSS语法，因此要先安装相应的预处理器</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>npm install css<span class="token operator">-</span>loader		<span class="token comment">//安装对应css依赖</span>
npm install style<span class="token operator">-</span>loader	<span class="token comment">//安装style依赖</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>	<span class="token comment">//链式loader</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>​		与loader相关的配置都在module对象中，其中 module.rules代表了模块的处理规则。每条规则内部可以包含很多配置项，这里我们只使用了最重要的两项——test和use。</p> <ul><li><font color="orange"><code>test</code>可接收一个正则表达式或者一个元素为正则表达式的数组，只有正则匹配上的模块才会使用这条规则。在本例中以<code>/\.css$/</code>来匹配所有以<code>.css</code>结尾的文件。</font></li> <li><font color="orange">use可接收一个数组，数组包含该规则所使用的 loader。在本例中只配置了一个css-loader，在只有一个 loader时也可以简化为字符串“css-loader”。</font></li></ul> <h3 id="loader-options"><a href="#loader-options" class="header-anchor">#</a> <code>loader options</code></h3> <p>​		通过<code>options</code>为<code>loader</code>添加配置</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token string">'style-loader'</span><span class="token punctuation">.</span>
    	<span class="token punctuation">{</span>
        	<span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        	<span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
        		<span class="token comment">//css-loader 配置</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>    
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="更多配置"><a href="#更多配置" class="header-anchor">#</a> 更多配置</h3> <h5 id="exclude与include"><a href="#exclude与include" class="header-anchor">#</a> exclude与include</h5> <p>​		<code>exclude</code>与 include 是用来排除或包含指定目录下的模块，可接收正则表达式或者字符串(文件绝对路径)，以及由它们组成的数组。请看下面的例子:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span>		<span class="token comment">//用exclude排除</span>
         <span class="token literal-property property">include</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">src</span><span class="token regex-delimiter">/</span></span>				<span class="token comment">//达到同样效果</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token comment">//所有被匹配的模块都会被排除在该规则外</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><font color="orange"><code>exclude</code>和<code>include</code>同时存在，<code>exclude</code>的优先级更高</font></p> <p>用exclude覆盖node_modules又想要保存node_modules的某些模块，可以修改exclude的正则</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules\/(?!(foo|bar)\/).*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>	<span class="token comment">//不排除foo和bar模块</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>排除<code>include</code>的子目录lib，保存整个<code>src</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">src\/lib</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
<span class="token literal-property property">include</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">src</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="resource与issuer"><a href="#resource与issuer" class="header-anchor">#</a> resource与issuer</h5> <p>​		<font color="orange">resource 与 issuer可用于更加精确地确定模块规则的作用范围。</font></p> <p>​		在Webpack，加载者是resource，被加载者是issuer</p> <p>​		前面介绍的test、exclude、include本质上属于对resource也就是被加载者的配置，如果想要对issuer 加载者也增加条件限制，则要额外写一些配置。比如，如果我们<font color="orange">只想让/src/pages目录下的JS可以引用CSS</font>，应该如何设置呢?请看下面的例子:</p> <ul><li><p>方式1</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">issuer</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">includes</span><span class="token operator">:</span><span class="token operator">/</span>src<span class="token operator">/</span>pages<span class="token operator">/</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>方式2</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">resource</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">issuer</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>通过添加resource对象来将外层的配置包起来，区分了resource和 issuer中的规则，这样就一目了然了。上面的配置与把resource的配置写在外层在本质上是一样的，然而这两种形式无法并存,只能选择一种风格进行配置。</p></li></ul> <h5 id="enforce"><a href="#enforce" class="header-anchor">#</a> enforce</h5> <p>​		enforce用来指定一个loader种类，只接收<code>pre</code>和<code>post</code>两种字符串类型。</p> <p>​		Webpack 中的loader按照执行顺序可分为pre、inline、normal、post 四种类型，上面我们直接定义的 loader都属于normal类型，inline形式官方已经不推荐使用，而pre和 post则需要使用enforce来指定。请看下面的例子:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">enforce</span><span class="token operator">:</span><span class="token string">'pre'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token string">'eslint-loader'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>​		可以看到，在配置中添加了一个<code>eslint-loader</code>来对源码进行质量检测，其enforce的值为“pre”，代表它将在所有正常loader之前执行，这样可以保证其检测的代码不是被其他loader更改过的。类似的，如果某一个loader是需要在所有loader 之后执行的，我们也可以指定其enforce为“post”。</p> <p>​		事实上，我们也可以不使用enforce而只要保证loader顺序是正确的即可。配置enforce主要的目的是使模块规则更加清晰，可读性更强，尤其是在实际工程中，配置文件可能达到上百行的情况，难以保证各个loader都按照预想的方式工作，<font color="orange">使用enforce可以强制指定loader的作用顺序。</font></p> <h2 id="常用loader介绍"><a href="#常用loader介绍" class="header-anchor">#</a> 常用loader介绍</h2> <h3 id="babel-loader"><a href="#babel-loader" class="header-anchor">#</a> babel-loader</h3> <p>​		<font color="orange"><code>babel-loader</code>用来处理ES6+并将其编译为ES5</font>，它使我们能够在工程中使用最新的语言特性(甚至还在提案中)，同时不必特别关注这些特性在不同平台的兼容问题。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install babel-loader @babel/core @babel/preset-env
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="各个模块作用如下"><a href="#各个模块作用如下" class="header-anchor">#</a> 各个模块作用如下</h4> <ul><li>babel-loader:<font color="orange">它是使Babel 与 webpack 协同工作的模块。</font></li> <li>@babel/core:顾名思义，它是 Babel编译器的核心模块。</li> <li>@babel/presct-cnv:它是Babel官方推荐的预置器，<font color="orange">可根据用户设置的目标环境自动添加所需的插件和补丁来编译ES6+代码。</font></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">presets</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>
                    <span class="token string-property property">'env'</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    	<span class="token literal-property property">modules</span><span class="token operator">:</span><span class="token boolean">false</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ol><li><font color="orange">由于babel-loader通常属于对所有JS后缀文件设置的规则，所以需要在exclude中添加node_modules，否则会令 babel-loader编译其中所有的模块，这将严重拖慢打包的速度,并且有可能改变第三方模块的原有行为。</font></li> <li>对于babel-loader本身我们添加了cacheDirectory配置项，它会启用缓存机制，<font color="orange">在重复打包未改变过的模块时防止二次编译，同样也会加快打包的速度。</font>cacheDirectory可以接收一个字符串类型的路径来作为缓存路径，这个值也可以为true，此时其缓存目录指向<code>node_modules/.cache/babel-loader</code></li> <li>由于<font color="orange">@babel/preset-env会将ES6 Module转化为CommonJS的形式，这会导致Webpack中的 tree-shaking特性失效</font>。将@babel/preset-env的modules配置项设置为false会禁用模块语句的转化，而将ES6Module的语法交给 Webpack本身处理。</li></ol> <p><font color="orange">babel-loader支持从.babelrc文件读取 Babel配置，因此可以将presets 和 plugins 从Webpack配置文件中提取出来，也能达到相同的效果。</font></p> <h3 id="ts-loader"><a href="#ts-loader" class="header-anchor">#</a> ts-loader</h3> <p>​		<code>ts-loader</code> 与 babel-loader的性质类似，它是<font color="orange">用于连接Webpack 与 Typescript 的模块</font>。可使用以下命令进行安装:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install ts-loader typescript
rules:{
	{
		test:/\.ts$/,
		use:'ts-loader'
	}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="html-loader"><a href="#html-loader" class="header-anchor">#</a> html-loader</h3> <p><code>html-loader</code>用于将HTML文件转化为字符串并进行格式化，这使得我们可以把一个HTML片段通过JS加载进来。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>`npm install html-loader`
rules:{
	{
		test:/\.html$/,
		use:'html-loader'
	}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="handlebars-loader"><a href="#handlebars-loader" class="header-anchor">#</a> handlebars-loader</h3> <p><font color="orange">后缀为handlebars的文件</font></p> <img src="WebPack学习笔记/image-20211021112511896.png" alt="image-20211021112511896" style="zoom:80%;"> <h3 id="file-loader"><a href="#file-loader" class="header-anchor">#</a> file-loader</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
<span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">{</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">use</span><span class="token operator">:</span><span class="token string">'file-loader'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="url-loader"><a href="#url-loader" class="header-anchor">#</a> url-loader</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//安装：npm install url-loader</span>
<span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'url-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">limit</span><span class="token operator">:</span><span class="token number">10240</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'[name].[ext]'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">publicPath</span><span class="token operator">:</span><span class="token string">'./assets-path/'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>url</code>接收与file-loader一样的参数，如<code>name</code>、<code>publicPath</code>等，同时也可接收一个limit参数，如果图片小于<code>limit</code>，同时经过<code>url-loade</code>r转化得到base64编码</p> <h1 id="知识点"><a href="#知识点" class="header-anchor">#</a> 知识点</h1> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>1</th> <th><strong>path.normalize(p)</strong> 规范化路径，注意'..' 和 '.'。</th></tr></thead> <tbody><tr><td>2</td> <td><code>path.join([path1][, path2][, ...])</code> 用于连接路径。该方法的主要用途在于，会正确使用当前系统的路径分隔符，Unix系统是&quot;/&quot;，Windows系统是&quot;&quot;。</td></tr> <tr><td>3</td> <td><strong>path.resolve([from ...], to)</strong> 将 <strong>to</strong> 参数解析为绝对路径，给定的路径的序列是从右往左被处理的，后面每个 path 被依次解析，直到构造完成一个绝对路径。 例如，给定的路径片段的序列为：/foo、/bar、baz，则调用 path.resolve('/foo', '/bar', 'baz') 会返回 /bar/baz。<code>path.resolve('/foo/bar', './baz'); // 返回: '/foo/bar/baz' path.resolve('/foo/bar', '/tmp/file/'); // 返回: '/tmp/file' path.resolve('wwwroot', 'static_files/png/', '../gif/image.gif'); // 如果当前工作目录为 /home/myself/node， // 则返回 '/home/myself/node/wwwroot/static_files/gif/image.gif'</code></td></tr> <tr><td>4</td> <td><strong>path.isAbsolute(path)</strong> 判断参数 <strong>path</strong> 是否是绝对路径。</td></tr> <tr><td>5</td> <td><strong>path.relative(from, to)</strong> 用于将绝对路径转为相对路径，返回从 from 到 to 的相对路径（基于当前工作目录）。在 Linux 上：<code>path.relative('/data/orandea/test/aaa', '/data/orandea/impl/bbb'); // 返回: '../../impl/bbb'</code>在 Windows 上：<code>path.relative('C:\\orandea\\test\\aaa', 'C:\\orandea\\impl\\bbb'); // 返回: '..\\..\\impl\\bbb'</code></td></tr> <tr><td>6</td> <td><strong>path.dirname(p)</strong> 返回路径中代表文件夹的部分，同 Unix 的dirname 命令类似。</td></tr> <tr><td>7</td> <td><strong>path.basename(p[, ext])</strong> 返回路径中的最后一部分。同 Unix 命令 bashname 类似。</td></tr> <tr><td>8</td> <td><strong>path.extname(p)</strong> 返回路径中文件的后缀名，即路径中最后一个'.'之后的部分。如果一个路径中并不包含'.'或该路径只包含一个'.' 且这个'.'为路径的第一个字符，则此命令返回空字符串。</td></tr> <tr><td>9</td> <td><strong>path.parse(pathString)</strong> 返回路径字符串的对象。</td></tr> <tr><td>10</td> <td><strong>path.format(pathObject)</strong> 从对象中返回路径字符串，和 path.parse 相反。</td></tr></tbody></table> <p><font color="orange"><code>__dirname nodejs</code> 的变量，代表当前文件的目录绝对路径</font></p> <ol><li><p>use的执行顺序
<img src="WebPack学习笔记/image-20211023154657406.png" alt="image-20211023154657406" style="zoom:80%;"></p></li> <li><p>devServer</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 运行代码的目录</span>
    <span class="token literal-property property">contentBase</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'build'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 监视 contentBase 目录下的所有文件，一旦文件变化就会 reload</span>
    <span class="token literal-property property">watchContentBase</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">watchOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 忽略文件</span>
      <span class="token literal-property property">ignored</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 启动gzip压缩</span>
    <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 端口号</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
    <span class="token comment">// 域名</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
    <span class="token comment">// 自动打开浏览器</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 开启HMR功能</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 不要显示启动服务器日志信息</span>
    <span class="token literal-property property">clientLogLevel</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
    <span class="token comment">// 除了一些基本启动信息以外，其他内容都不要显示</span>
    <span class="token literal-property property">quiet</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 如果出错了，不要全屏提示~</span>
    <span class="token literal-property property">overlay</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 服务器代理 --&gt; 解决开发环境跨域问题</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 一旦devServer(5000)服务器接受到 /api/xxx 的请求，就会把请求转发到另外一个服务器(3000)</span>
      <span class="token string-property property">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
        <span class="token comment">// 发送请求时，请求路径重写：将 /api/xxx --&gt; /xxx （去掉/api）</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">'^/api'</span><span class="token operator">:</span> <span class="token string">''</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div></li> <li></li></ol></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#何为webpack" class="sidebar-link reco-side-何为webpack" data-v-70334359>何为Webpack</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#何为模块" class="sidebar-link reco-side-何为模块" data-v-70334359>何为模块</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#javascript中的模块" class="sidebar-link reco-side-javascript中的模块" data-v-70334359>JavaScript中的模块</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#模块打包工具" class="sidebar-link reco-side-模块打包工具" data-v-70334359>模块打包工具</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#wepack的优势" class="sidebar-link reco-side-wepack的优势" data-v-70334359>Wepack的优势</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#安装" class="sidebar-link reco-side-安装" data-v-70334359>安装</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#应用打包" class="sidebar-link reco-side-应用打包" data-v-70334359>应用打包</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#通过打包命令打包" class="sidebar-link reco-side-通过打包命令打包" data-v-70334359>通过打包命令打包</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#使用-npm-scripts" class="sidebar-link reco-side-使用-npm-scripts" data-v-70334359>使用 npm scripts</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#使用默认配置目录" class="sidebar-link reco-side-使用默认配置目录" data-v-70334359>使用默认配置目录</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#使用配置文件" class="sidebar-link reco-side-使用配置文件" data-v-70334359>使用配置文件</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#webpack-dev-server" class="sidebar-link reco-side-webpack-dev-server" data-v-70334359>webpack-dev-server</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#commonjs" class="sidebar-link reco-side-commonjs" data-v-70334359>CommonJS</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#模块" class="sidebar-link reco-side-模块" data-v-70334359>模块</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#导出" class="sidebar-link reco-side-导出" data-v-70334359>导出</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#导入" class="sidebar-link reco-side-导入" data-v-70334359>导入</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#es6-module" class="sidebar-link reco-side-es6-module" data-v-70334359>ES6 Module</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#模块-2" class="sidebar-link reco-side-模块-2" data-v-70334359>模块</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#导出-2" class="sidebar-link reco-side-导出-2" data-v-70334359>导出</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#导入-2" class="sidebar-link reco-side-导入-2" data-v-70334359>导入</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#复合写法" class="sidebar-link reco-side-复合写法" data-v-70334359>复合写法</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#commonjs和es6-module的区别" class="sidebar-link reco-side-commonjs和es6-module的区别" data-v-70334359>CommonJS和ES6 Module的区别</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#动态于静态" class="sidebar-link reco-side-动态于静态" data-v-70334359>动态于静态</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#值拷贝和动态映射" class="sidebar-link reco-side-值拷贝和动态映射" data-v-70334359>值拷贝和动态映射</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#循环依赖" class="sidebar-link reco-side-循环依赖" data-v-70334359>循环依赖</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#加载其他类型模块" class="sidebar-link reco-side-加载其他类型模块" data-v-70334359>加载其他类型模块</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#非模块化文件" class="sidebar-link reco-side-非模块化文件" data-v-70334359>非模块化文件</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#amd-异步模块" class="sidebar-link reco-side-amd-异步模块" data-v-70334359>AMD（异步模块）</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#umd-通用模块标志" class="sidebar-link reco-side-umd-通用模块标志" data-v-70334359>UMD（通用模块标志）</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#加载npm模块" class="sidebar-link reco-side-加载npm模块" data-v-70334359>加载npm模块</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#模块打包原理" class="sidebar-link reco-side-模块打包原理" data-v-70334359>模块打包原理</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#配置资源入口" class="sidebar-link reco-side-配置资源入口" data-v-70334359>配置资源入口</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#context" class="sidebar-link reco-side-context" data-v-70334359>context</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#entry" class="sidebar-link reco-side-entry" data-v-70334359>entry</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#实例" class="sidebar-link reco-side-实例" data-v-70334359>实例</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#配置资源出口" class="sidebar-link reco-side-配置资源出口" data-v-70334359>配置资源出口</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#filename" class="sidebar-link reco-side-filename" data-v-70334359>filename</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#path" class="sidebar-link reco-side-path" data-v-70334359>path</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#publicpath" class="sidebar-link reco-side-publicpath" data-v-70334359>publicPath</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#实例-2" class="sidebar-link reco-side-实例-2" data-v-70334359>实例</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#总结" class="sidebar-link reco-side-总结" data-v-70334359>总结</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#一切皆模块" class="sidebar-link reco-side-一切皆模块" data-v-70334359>一切皆模块</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#loader概述" class="sidebar-link reco-side-loader概述" data-v-70334359>loader概述</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#loader配置" class="sidebar-link reco-side-loader配置" data-v-70334359>loader配置</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#loader的引入" class="sidebar-link reco-side-loader的引入" data-v-70334359>loader的引入</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#loader-options" class="sidebar-link reco-side-loader-options" data-v-70334359>loader options</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#更多配置" class="sidebar-link reco-side-更多配置" data-v-70334359>更多配置</a></li><li class="level-2" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#常用loader介绍" class="sidebar-link reco-side-常用loader介绍" data-v-70334359>常用loader介绍</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#babel-loader" class="sidebar-link reco-side-babel-loader" data-v-70334359>babel-loader</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#ts-loader" class="sidebar-link reco-side-ts-loader" data-v-70334359>ts-loader</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#html-loader" class="sidebar-link reco-side-html-loader" data-v-70334359>html-loader</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#handlebars-loader" class="sidebar-link reco-side-handlebars-loader" data-v-70334359>handlebars-loader</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#file-loader" class="sidebar-link reco-side-file-loader" data-v-70334359>file-loader</a></li><li class="level-3" data-v-70334359><a href="/ccyblog/blogs/da-bao-gong-ju/webpackxue-xi-bi-ji.html#url-loader" class="sidebar-link reco-side-url-loader" data-v-70334359>url-loader</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="kanbanniang" data-v-6e863240><div class="banniang-container" style="display:;" data-v-6e863240><div class="messageBox" style="right:88px;bottom:270px;display:none;" data-v-6e863240></div> <div class="operation" style="right:15px;bottom:100px;" data-v-6e863240><i class="kbnfont kbn-ban-home ban-home" data-v-6e863240></i> <i class="kbnfont kbn-ban-message message" data-v-6e863240></i> <i class="kbnfont kbn-ban-info info" data-v-6e863240></i> <i class="kbnfont kbn-ban-close close" data-v-6e863240></i></div> <div id="L2dCanvas" class="Canvas" style="position: absolute; bottom: -50px;z-index:100000" data-v-6e863240></div></div> <div class="showBanNiang" style="display:none;" data-v-6e863240>看板娘</div></div><!----></div></div>
    <script src="/ccyblog/assets/js/app.61cc9ff9.js" defer></script><script src="/ccyblog/assets/js/3.897744a6.js" defer></script><script src="/ccyblog/assets/js/1.371d3697.js" defer></script><script src="/ccyblog/assets/js/51.f502157e.js" defer></script><script src="/ccyblog/assets/js/8.b19724a0.js" defer></script>
  </body>
</html>
